<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Index</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Index</h1>
    
    


    


    <h3> </h3>









    




    <section>
        <article><h1 id="a-node-js-library-for-accessing-amazon-simple-workflow-swf-">A Node.js library for accessing Amazon Simple Workflow (SWF)</h1>
<p><a href="http://badge.fury.io/js/aws-swf"><img src="https://badge.fury.io/js/aws-swf.png" alt="NPM version"></a>
<a href="https://travis-ci.org/neyric/aws-swf"><img src="https://travis-ci.org/neyric/aws-swf.png?branch=master" alt="Build Status"></a>
<a href="https://coveralls.io/r/neyric/aws-swf?branch=master"><img src="https://coveralls.io/repos/neyric/aws-swf/badge.png?branch=master" alt="Coverage Status"></a>
<a href="https://codeclimate.com/github/neyric/aws-swf"><img src="https://codeclimate.com/github/neyric/aws-swf.png" alt="Code Climate"></a></p>
<p><strong>aws-swf</strong> provides high-level classes to build Amazon Simple Workflows using Node.js.</p>
<p>It is built on top of the official Node.js <a href="http://aws.amazon.com/documentation/sdkfornodejs/">aws-sdk</a> for low-level API calls. You can find the full <a href="http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/frames.html">API reference here</a>.</p>
<h2 id="requirements">Requirements</h2>
<ul>
<li><a href="http://nodejs.org/">node.js</a> &gt;= 0.8</li>
<li>An active <a href="http://aws.amazon.com/">AWS account</a> with <a href="http://docs.amazonwebservices.com/AWSSecurityCredentials/1.0/AboutAWSCredentials.html#AccessKeys">Access Keys</a></li>
<li>Basic understanding of <a href="http://aws.amazon.com/en/documentation/swf/">AWS SimpleWorkflow</a> concepts</li>
</ul>
<h2 id="installation">Installation</h2>
<pre><code>npm install aws-swf</code></pre>
<h3 id="setting-aws-credentials">Setting AWS Credentials</h3>
<p>Cf. http://docs.aws.amazon.com/AWSJavaScriptSDK/guide/node-configuring.html#Setting_AWS_Credentials</p>
<h2 id="usage">Usage</h2>
<h3 id="step-1-register-domains-activitytypes-workflowtypes">Step 1 : Register Domains, ActivityTypes, WorkflowTypes</h3>
<p>The AWS SDK is sufficient to register SWF objects, since those are just direct API calls.
(You can also register them through the <a href="https://console.aws.amazon.com/swf/home">AWS console</a>.)</p>
<p>You can run the following example to register the objects used in the following examples :</p>
<p><a href="https://github.com/neyric/aws-swf/blob/master/examples/simple-register.js">Example to register &quot;test-domain&quot;, &quot;simple-activity&quot; and &quot;simple-workflow&quot;</a></p>
<h3 id="step-2-create-activity-workers">Step 2 : Create Activity Workers</h3>
<p>An <strong><a href="http://neyric.github.io/aws-swf/apidoc/ActivityPoller.html">ActivityPoller</a></strong> will wait for new tasks from SWF, and emit an <strong>activityTask</strong> event.
The event receives an instance of <strong><a href="http://neyric.github.io/aws-swf/apidoc/ActivityTask.html">ActivityTask</a></strong>, which makes it easier to send the response to SWF.</p>
<p><a href="https://github.com/neyric/aws-swf/blob/master/examples/simple-activity-worker.js">This example</a> starts an Activity Worker which completes immediatly.</p>
<h3 id="step-3-create-workflow-deciders">Step 3 : Create Workflow Deciders</h3>
<p>The <strong><a href="http://neyric.github.io/aws-swf/apidoc/Decider.html">Decider</a></strong> class will wait for new decision tasks from SWF, and emit a <strong>decisionTask</strong> event.
The event receives an instance of <strong><a href="http://neyric.github.io/aws-swf/apidoc/DecisionTask.html">DecisionTask</a></strong>, composed of :</p>
<ul>
<li>an <strong><a href="http://neyric.github.io/aws-swf/apidoc/EventList.html">EventList</a></strong> instance, to query the state of the workflow</li>
<li>a <strong><a href="http://neyric.github.io/aws-swf/apidoc/DecisionResponse.html">DecisionResponse</a></strong> instance, to prepare the decider response with decisions</li>
</ul>
<p><a href="https://github.com/neyric/aws-swf/blob/master/examples/simple-decider-worker.js">Simple decider worker example</a> : decision worker, which schedules an activity task, then stop the workflow.</p>
<h3 id="step-4-start-a-workflow">Step 4 : Start a workflow</h3>
<p>To start a workflow, call the <em>start</em> method on a <strong><a href="http://neyric.github.io/aws-swf/apidoc/Workflow.html">Workflow</a></strong> instance. This call will return a <strong><a href="http://neyric.github.io/aws-swf/apidoc/WorkflowExecution.html">WorkflowExecution</a></strong> instance, which you can use to signal or terminate a workflow.</p>
<ul>
<li><a href="https://github.com/neyric/aws-swf/blob/master/examples/simple-start.js">Starting a workflow</a> : start an instance of the simple workflow example.</li>
</ul>
<h2 id="api-documentation">API Documentation</h2>
<p>The API documentation is available online at http://neyric.github.io/aws-swf/apidoc/</p>
<p>To rebuild the documentation, install jsdoc, then :</p>
<pre><code>jsdoc lib/*.js README.md -d apidoc</code></pre>
<h2 id="test">Test</h2>
<p>Tests can be executed with Mocha :</p>
<pre><code>$ mocha</code></pre>
<p>To get the coverage, run :</p>
<pre><code>$ ./node_modules/.bin/istanbul cover ./node_modules/mocha/bin/_mocha</code></pre>
<p>Then open coverage/lcov-report/index.html</p>
<p>To send the coverage to coveralls, I run locally (I don't know why travis-ci after-script doesn't work...):</p>
<pre><code>$ NODE_ENV=test ./node_modules/.bin/istanbul cover ./node_modules/mocha/bin/_mocha --report lcovonly -- -R spec &amp;&amp; cat ./coverage/lcov.info | COVERALLS_REPO_TOKEN=xxxx ./node_modules/coveralls/bin/coveralls.js &amp;&amp; rm -rf ./coverage</code></pre>
<h2 id="license">License</h2>
<p><a href="https://raw.github.com/neyric/aws-swf/master/LICENSE.txt">MIT License</a></p>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="https://github.com/neyric/aws-swf-toolkit">aws-swf-toolkit</a>: Node.js Framework for workflows on Amazon SWF</li>
<li><a href="https://github.com/neyric/aws-swf-activities">aws-swf-activities</a>: A collection of Node.js activity workers for Amazon SWF</li>
</ul></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="ActivityPoller.html">ActivityPoller</a></li><li><a href="ActivityTask.html">ActivityTask</a></li><li><a href="Decider.html">Decider</a></li><li><a href="DecisionResponse.html">DecisionResponse</a></li><li><a href="DecisionTask.html">DecisionTask</a></li><li><a href="EventList.html">EventList</a></li><li><a href="Poller.html">Poller</a></li><li><a href="Workflow.html">Workflow</a></li><li><a href="WorkflowExecution.html">WorkflowExecution</a></li></ul><h3>Events</h3><ul><li><a href="ActivityPoller.html#event:activityTask">activityTask</a></li><li><a href="ActivityPoller.html#event:error">error</a></li><li><a href="ActivityPoller.html#event:poll">poll</a></li><li><a href="Decider.html#event:decisionTask">decisionTask</a></li><li><a href="Decider.html#event:error">error</a></li><li><a href="Decider.html#event:poll">poll</a></li><li><a href="Poller.html#event:error">error</a></li><li><a href="Poller.html#event:poll">poll</a></li></ul><h3>Global</h3><ul><li><a href="global.html#createClient">createClient</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha4</a> on Fri Feb 28 2014 16:54:55 GMT+0100 (CET)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>